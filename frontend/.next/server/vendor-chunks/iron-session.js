"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/iron-session";
exports.ids = ["vendor-chunks/iron-session"];
exports.modules = {

/***/ "(action-browser)/./node_modules/iron-session/dist/index.js":
/*!*************************************************!*\
  !*** ./node_modules/iron-session/dist/index.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getIronSession: () => (/* binding */ getIronSession),\n/* harmony export */   sealData: () => (/* binding */ sealData),\n/* harmony export */   unsealData: () => (/* binding */ unsealData)\n/* harmony export */ });\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookie */ \"(action-browser)/./node_modules/cookie/index.js\");\n/* harmony import */ var iron_webcrypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! iron-webcrypto */ \"(action-browser)/./node_modules/iron-webcrypto/dist/index.js\");\n/* harmony import */ var uncrypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uncrypto */ \"(action-browser)/./node_modules/uncrypto/dist/crypto.node.mjs\");\n\n\n\n\n// src/core.ts\nvar timestampSkewSec = 60;\nvar fourteenDaysInSeconds = 14 * 24 * 3600;\nvar currentMajorVersion = 2;\nvar versionDelimiter = \"~\";\nvar defaultOptions = {\n  ttl: fourteenDaysInSeconds,\n  cookieOptions: { httpOnly: true, secure: true, sameSite: \"lax\", path: \"/\" }\n};\nfunction normalizeStringPasswordToMap(password) {\n  return typeof password === \"string\" ? { 1: password } : password;\n}\nfunction parseSeal(seal) {\n  const [sealWithoutVersion, tokenVersionAsString] = seal.split(versionDelimiter);\n  const tokenVersion = tokenVersionAsString == null ? null : parseInt(tokenVersionAsString, 10);\n  return { sealWithoutVersion, tokenVersion };\n}\nfunction computeCookieMaxAge(ttl) {\n  if (ttl === 0) {\n    return 2147483647;\n  }\n  return ttl - timestampSkewSec;\n}\nfunction getCookie(req, cookieName) {\n  return (0,cookie__WEBPACK_IMPORTED_MODULE_0__.parse)(\n    (\"headers\" in req && typeof req.headers.get === \"function\" ? req.headers.get(\"cookie\") : req.headers.cookie) ?? \"\"\n  )[cookieName] ?? \"\";\n}\nfunction getServerActionCookie(cookieName, cookieHandler) {\n  const cookieObject = cookieHandler.get(cookieName);\n  const cookie = cookieObject?.value;\n  if (typeof cookie === \"string\") {\n    return cookie;\n  }\n  return \"\";\n}\nfunction setCookie(res, cookieValue) {\n  if (\"headers\" in res && typeof res.headers.append === \"function\") {\n    res.headers.append(\"set-cookie\", cookieValue);\n    return;\n  }\n  let existingSetCookie = res.getHeader(\"set-cookie\") ?? [];\n  if (!Array.isArray(existingSetCookie)) {\n    existingSetCookie = [existingSetCookie.toString()];\n  }\n  res.setHeader(\"set-cookie\", [\n    ...existingSetCookie,\n    cookieValue\n  ]);\n}\nfunction createSealData(_crypto) {\n  return async function sealData2(data, {\n    password,\n    ttl = fourteenDaysInSeconds\n  }) {\n    const passwordsMap = normalizeStringPasswordToMap(password);\n    const mostRecentPasswordId = Math.max(\n      ...Object.keys(passwordsMap).map(Number)\n    );\n    const passwordForSeal = {\n      id: mostRecentPasswordId.toString(),\n      secret: passwordsMap[mostRecentPasswordId]\n    };\n    const seal$1 = await (0,iron_webcrypto__WEBPACK_IMPORTED_MODULE_1__.seal)(_crypto, data, passwordForSeal, {\n      ...iron_webcrypto__WEBPACK_IMPORTED_MODULE_1__.defaults,\n      ttl: ttl * 1e3\n    });\n    return `${seal$1}${versionDelimiter}${currentMajorVersion}`;\n  };\n}\nfunction createUnsealData(_crypto) {\n  return async function unsealData2(seal, {\n    password,\n    ttl = fourteenDaysInSeconds\n  }) {\n    const passwordsMap = normalizeStringPasswordToMap(password);\n    const { sealWithoutVersion, tokenVersion } = parseSeal(seal);\n    try {\n      const data = await (0,iron_webcrypto__WEBPACK_IMPORTED_MODULE_1__.unseal)(_crypto, sealWithoutVersion, passwordsMap, {\n        ...iron_webcrypto__WEBPACK_IMPORTED_MODULE_1__.defaults,\n        ttl: ttl * 1e3\n      }) ?? {};\n      if (tokenVersion === 2) {\n        return data;\n      }\n      return { ...data.persistent };\n    } catch (error) {\n      if (error instanceof Error && /^(Expired seal|Bad hmac value|Cannot find password|Incorrect number of sealed components)/.test(\n        error.message\n      )) {\n        return {};\n      }\n      throw error;\n    }\n  };\n}\nfunction getSessionConfig(sessionOptions) {\n  const options = {\n    ...defaultOptions,\n    ...sessionOptions,\n    cookieOptions: {\n      ...defaultOptions.cookieOptions,\n      ...sessionOptions.cookieOptions || {}\n    }\n  };\n  if (sessionOptions.cookieOptions && \"maxAge\" in sessionOptions.cookieOptions) {\n    if (sessionOptions.cookieOptions.maxAge === void 0) {\n      options.ttl = 0;\n    }\n  } else {\n    options.cookieOptions.maxAge = computeCookieMaxAge(options.ttl);\n  }\n  return options;\n}\nvar badUsageMessage = \"iron-session: Bad usage: use getIronSession(req, res, options) or getIronSession(cookieStore, options).\";\nfunction createGetIronSession(sealData2, unsealData2) {\n  return getIronSession2;\n  async function getIronSession2(reqOrCookieStore, resOrsessionOptions, sessionOptions) {\n    if (!reqOrCookieStore) {\n      throw new Error(badUsageMessage);\n    }\n    if (!resOrsessionOptions) {\n      throw new Error(badUsageMessage);\n    }\n    if (!sessionOptions) {\n      return getIronSessionFromCookieStore(\n        reqOrCookieStore,\n        resOrsessionOptions,\n        sealData2,\n        unsealData2\n      );\n    }\n    const req = reqOrCookieStore;\n    const res = resOrsessionOptions;\n    if (!sessionOptions) {\n      throw new Error(badUsageMessage);\n    }\n    if (!sessionOptions.cookieName) {\n      throw new Error(\"iron-session: Bad usage. Missing cookie name.\");\n    }\n    if (!sessionOptions.password) {\n      throw new Error(\"iron-session: Bad usage. Missing password.\");\n    }\n    const passwordsMap = normalizeStringPasswordToMap(sessionOptions.password);\n    if (Object.values(passwordsMap).some((password) => password.length < 32)) {\n      throw new Error(\n        \"iron-session: Bad usage. Password must be at least 32 characters long.\"\n      );\n    }\n    let sessionConfig = getSessionConfig(sessionOptions);\n    const sealFromCookies = getCookie(req, sessionConfig.cookieName);\n    const session = sealFromCookies ? await unsealData2(sealFromCookies, {\n      password: passwordsMap,\n      ttl: sessionConfig.ttl\n    }) : {};\n    Object.defineProperties(session, {\n      updateConfig: {\n        value: function updateConfig(newSessionOptions) {\n          sessionConfig = getSessionConfig(newSessionOptions);\n        }\n      },\n      save: {\n        value: async function save() {\n          if (\"headersSent\" in res && res.headersSent) {\n            throw new Error(\n              \"iron-session: Cannot set session cookie: session.save() was called after headers were sent. Make sure to call it before any res.send() or res.end()\"\n            );\n          }\n          const seal = await sealData2(session, {\n            password: passwordsMap,\n            ttl: sessionConfig.ttl\n          });\n          const cookieValue = (0,cookie__WEBPACK_IMPORTED_MODULE_0__.serialize)(\n            sessionConfig.cookieName,\n            seal,\n            sessionConfig.cookieOptions\n          );\n          if (cookieValue.length > 4096) {\n            throw new Error(\n              `iron-session: Cookie length is too big (${cookieValue.length} bytes), browsers will refuse it. Try to remove some data.`\n            );\n          }\n          setCookie(res, cookieValue);\n        }\n      },\n      destroy: {\n        value: function destroy() {\n          Object.keys(session).forEach((key) => {\n            delete session[key];\n          });\n          const cookieValue = (0,cookie__WEBPACK_IMPORTED_MODULE_0__.serialize)(sessionConfig.cookieName, \"\", {\n            ...sessionConfig.cookieOptions,\n            maxAge: 0\n          });\n          setCookie(res, cookieValue);\n        }\n      }\n    });\n    return session;\n  }\n}\nasync function getIronSessionFromCookieStore(cookieStore, sessionOptions, sealData2, unsealData2) {\n  if (!sessionOptions.cookieName) {\n    throw new Error(\"iron-session: Bad usage. Missing cookie name.\");\n  }\n  if (!sessionOptions.password) {\n    throw new Error(\"iron-session: Bad usage. Missing password.\");\n  }\n  const passwordsMap = normalizeStringPasswordToMap(sessionOptions.password);\n  if (Object.values(passwordsMap).some((password) => password.length < 32)) {\n    throw new Error(\n      \"iron-session: Bad usage. Password must be at least 32 characters long.\"\n    );\n  }\n  const sessionConfig = getSessionConfig(sessionOptions);\n  const sealFromCookies = getServerActionCookie(\n    sessionConfig.cookieName,\n    cookieStore\n  );\n  const session = sealFromCookies ? await unsealData2(sealFromCookies, {\n    password: passwordsMap,\n    ttl: sessionConfig.ttl\n  }) : {};\n  Object.defineProperties(session, {\n    save: {\n      value: async function save() {\n        const seal = await sealData2(session, {\n          password: passwordsMap,\n          ttl: sessionConfig.ttl\n        });\n        const cookieLength = sessionConfig.cookieName.length + seal.length + JSON.stringify(sessionConfig.cookieOptions).length;\n        if (cookieLength > 4096) {\n          throw new Error(\n            `iron-session: Cookie length is too big (${cookieLength} bytes), browsers will refuse it. Try to remove some data.`\n          );\n        }\n        cookieStore.set(\n          sessionConfig.cookieName,\n          seal,\n          sessionConfig.cookieOptions\n        );\n      }\n    },\n    destroy: {\n      value: function destroy() {\n        Object.keys(session).forEach((key) => {\n          delete session[key];\n        });\n        const cookieOptions = { ...sessionConfig.cookieOptions, maxAge: 0 };\n        cookieStore.set(sessionConfig.cookieName, \"\", cookieOptions);\n      }\n    }\n  });\n  return session;\n}\nvar sealData = createSealData(uncrypto__WEBPACK_IMPORTED_MODULE_2__);\nvar unsealData = createUnsealData(uncrypto__WEBPACK_IMPORTED_MODULE_2__);\nvar getIronSession = createGetIronSession(sealData, unsealData);\n\n\n//# sourceMappingURL=out.js.map\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9pcm9uLXNlc3Npb24vZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEM7QUFDYztBQUNyQjs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBLDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZDQUFLO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG9EQUFJO0FBQzdCLFNBQVMsb0RBQVE7QUFDakI7QUFDQSxLQUFLO0FBQ0wsY0FBYyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsb0JBQW9CO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFlBQVksbUNBQW1DO0FBQy9DO0FBQ0EseUJBQXlCLHNEQUFNO0FBQy9CLFdBQVcsb0RBQVE7QUFDbkI7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsOEJBQThCLGlEQUFTO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxvQkFBb0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsOEJBQThCLGlEQUFTO0FBQ3ZDO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsdURBQXVELGNBQWM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw4QkFBOEIscUNBQU07QUFDcEMsa0NBQWtDLHFDQUFNO0FBQ3hDOztBQUVnRDtBQUNoRDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnQvLi9ub2RlX21vZHVsZXMvaXJvbi1zZXNzaW9uL2Rpc3QvaW5kZXguanM/YWIyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZXJpYWxpemUsIHBhcnNlIH0gZnJvbSAnY29va2llJztcbmltcG9ydCB7IHNlYWwsIGRlZmF1bHRzLCB1bnNlYWwgfSBmcm9tICdpcm9uLXdlYmNyeXB0byc7XG5pbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSAndW5jcnlwdG8nO1xuXG4vLyBzcmMvY29yZS50c1xudmFyIHRpbWVzdGFtcFNrZXdTZWMgPSA2MDtcbnZhciBmb3VydGVlbkRheXNJblNlY29uZHMgPSAxNCAqIDI0ICogMzYwMDtcbnZhciBjdXJyZW50TWFqb3JWZXJzaW9uID0gMjtcbnZhciB2ZXJzaW9uRGVsaW1pdGVyID0gXCJ+XCI7XG52YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIHR0bDogZm91cnRlZW5EYXlzSW5TZWNvbmRzLFxuICBjb29raWVPcHRpb25zOiB7IGh0dHBPbmx5OiB0cnVlLCBzZWN1cmU6IHRydWUsIHNhbWVTaXRlOiBcImxheFwiLCBwYXRoOiBcIi9cIiB9XG59O1xuZnVuY3Rpb24gbm9ybWFsaXplU3RyaW5nUGFzc3dvcmRUb01hcChwYXNzd29yZCkge1xuICByZXR1cm4gdHlwZW9mIHBhc3N3b3JkID09PSBcInN0cmluZ1wiID8geyAxOiBwYXNzd29yZCB9IDogcGFzc3dvcmQ7XG59XG5mdW5jdGlvbiBwYXJzZVNlYWwoc2VhbCkge1xuICBjb25zdCBbc2VhbFdpdGhvdXRWZXJzaW9uLCB0b2tlblZlcnNpb25Bc1N0cmluZ10gPSBzZWFsLnNwbGl0KHZlcnNpb25EZWxpbWl0ZXIpO1xuICBjb25zdCB0b2tlblZlcnNpb24gPSB0b2tlblZlcnNpb25Bc1N0cmluZyA9PSBudWxsID8gbnVsbCA6IHBhcnNlSW50KHRva2VuVmVyc2lvbkFzU3RyaW5nLCAxMCk7XG4gIHJldHVybiB7IHNlYWxXaXRob3V0VmVyc2lvbiwgdG9rZW5WZXJzaW9uIH07XG59XG5mdW5jdGlvbiBjb21wdXRlQ29va2llTWF4QWdlKHR0bCkge1xuICBpZiAodHRsID09PSAwKSB7XG4gICAgcmV0dXJuIDIxNDc0ODM2NDc7XG4gIH1cbiAgcmV0dXJuIHR0bCAtIHRpbWVzdGFtcFNrZXdTZWM7XG59XG5mdW5jdGlvbiBnZXRDb29raWUocmVxLCBjb29raWVOYW1lKSB7XG4gIHJldHVybiBwYXJzZShcbiAgICAoXCJoZWFkZXJzXCIgaW4gcmVxICYmIHR5cGVvZiByZXEuaGVhZGVycy5nZXQgPT09IFwiZnVuY3Rpb25cIiA/IHJlcS5oZWFkZXJzLmdldChcImNvb2tpZVwiKSA6IHJlcS5oZWFkZXJzLmNvb2tpZSkgPz8gXCJcIlxuICApW2Nvb2tpZU5hbWVdID8/IFwiXCI7XG59XG5mdW5jdGlvbiBnZXRTZXJ2ZXJBY3Rpb25Db29raWUoY29va2llTmFtZSwgY29va2llSGFuZGxlcikge1xuICBjb25zdCBjb29raWVPYmplY3QgPSBjb29raWVIYW5kbGVyLmdldChjb29raWVOYW1lKTtcbiAgY29uc3QgY29va2llID0gY29va2llT2JqZWN0Py52YWx1ZTtcbiAgaWYgKHR5cGVvZiBjb29raWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gY29va2llO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuZnVuY3Rpb24gc2V0Q29va2llKHJlcywgY29va2llVmFsdWUpIHtcbiAgaWYgKFwiaGVhZGVyc1wiIGluIHJlcyAmJiB0eXBlb2YgcmVzLmhlYWRlcnMuYXBwZW5kID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXMuaGVhZGVycy5hcHBlbmQoXCJzZXQtY29va2llXCIsIGNvb2tpZVZhbHVlKTtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IGV4aXN0aW5nU2V0Q29va2llID0gcmVzLmdldEhlYWRlcihcInNldC1jb29raWVcIikgPz8gW107XG4gIGlmICghQXJyYXkuaXNBcnJheShleGlzdGluZ1NldENvb2tpZSkpIHtcbiAgICBleGlzdGluZ1NldENvb2tpZSA9IFtleGlzdGluZ1NldENvb2tpZS50b1N0cmluZygpXTtcbiAgfVxuICByZXMuc2V0SGVhZGVyKFwic2V0LWNvb2tpZVwiLCBbXG4gICAgLi4uZXhpc3RpbmdTZXRDb29raWUsXG4gICAgY29va2llVmFsdWVcbiAgXSk7XG59XG5mdW5jdGlvbiBjcmVhdGVTZWFsRGF0YShfY3J5cHRvKSB7XG4gIHJldHVybiBhc3luYyBmdW5jdGlvbiBzZWFsRGF0YTIoZGF0YSwge1xuICAgIHBhc3N3b3JkLFxuICAgIHR0bCA9IGZvdXJ0ZWVuRGF5c0luU2Vjb25kc1xuICB9KSB7XG4gICAgY29uc3QgcGFzc3dvcmRzTWFwID0gbm9ybWFsaXplU3RyaW5nUGFzc3dvcmRUb01hcChwYXNzd29yZCk7XG4gICAgY29uc3QgbW9zdFJlY2VudFBhc3N3b3JkSWQgPSBNYXRoLm1heChcbiAgICAgIC4uLk9iamVjdC5rZXlzKHBhc3N3b3Jkc01hcCkubWFwKE51bWJlcilcbiAgICApO1xuICAgIGNvbnN0IHBhc3N3b3JkRm9yU2VhbCA9IHtcbiAgICAgIGlkOiBtb3N0UmVjZW50UGFzc3dvcmRJZC50b1N0cmluZygpLFxuICAgICAgc2VjcmV0OiBwYXNzd29yZHNNYXBbbW9zdFJlY2VudFBhc3N3b3JkSWRdXG4gICAgfTtcbiAgICBjb25zdCBzZWFsJDEgPSBhd2FpdCBzZWFsKF9jcnlwdG8sIGRhdGEsIHBhc3N3b3JkRm9yU2VhbCwge1xuICAgICAgLi4uZGVmYXVsdHMsXG4gICAgICB0dGw6IHR0bCAqIDFlM1xuICAgIH0pO1xuICAgIHJldHVybiBgJHtzZWFsJDF9JHt2ZXJzaW9uRGVsaW1pdGVyfSR7Y3VycmVudE1ham9yVmVyc2lvbn1gO1xuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlVW5zZWFsRGF0YShfY3J5cHRvKSB7XG4gIHJldHVybiBhc3luYyBmdW5jdGlvbiB1bnNlYWxEYXRhMihzZWFsLCB7XG4gICAgcGFzc3dvcmQsXG4gICAgdHRsID0gZm91cnRlZW5EYXlzSW5TZWNvbmRzXG4gIH0pIHtcbiAgICBjb25zdCBwYXNzd29yZHNNYXAgPSBub3JtYWxpemVTdHJpbmdQYXNzd29yZFRvTWFwKHBhc3N3b3JkKTtcbiAgICBjb25zdCB7IHNlYWxXaXRob3V0VmVyc2lvbiwgdG9rZW5WZXJzaW9uIH0gPSBwYXJzZVNlYWwoc2VhbCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB1bnNlYWwoX2NyeXB0bywgc2VhbFdpdGhvdXRWZXJzaW9uLCBwYXNzd29yZHNNYXAsIHtcbiAgICAgICAgLi4uZGVmYXVsdHMsXG4gICAgICAgIHR0bDogdHRsICogMWUzXG4gICAgICB9KSA/PyB7fTtcbiAgICAgIGlmICh0b2tlblZlcnNpb24gPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9XG4gICAgICByZXR1cm4geyAuLi5kYXRhLnBlcnNpc3RlbnQgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgL14oRXhwaXJlZCBzZWFsfEJhZCBobWFjIHZhbHVlfENhbm5vdCBmaW5kIHBhc3N3b3JkfEluY29ycmVjdCBudW1iZXIgb2Ygc2VhbGVkIGNvbXBvbmVudHMpLy50ZXN0KFxuICAgICAgICBlcnJvci5tZXNzYWdlXG4gICAgICApKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFNlc3Npb25Db25maWcoc2Vzc2lvbk9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAuLi5zZXNzaW9uT3B0aW9ucyxcbiAgICBjb29raWVPcHRpb25zOiB7XG4gICAgICAuLi5kZWZhdWx0T3B0aW9ucy5jb29raWVPcHRpb25zLFxuICAgICAgLi4uc2Vzc2lvbk9wdGlvbnMuY29va2llT3B0aW9ucyB8fCB7fVxuICAgIH1cbiAgfTtcbiAgaWYgKHNlc3Npb25PcHRpb25zLmNvb2tpZU9wdGlvbnMgJiYgXCJtYXhBZ2VcIiBpbiBzZXNzaW9uT3B0aW9ucy5jb29raWVPcHRpb25zKSB7XG4gICAgaWYgKHNlc3Npb25PcHRpb25zLmNvb2tpZU9wdGlvbnMubWF4QWdlID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMudHRsID0gMDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgb3B0aW9ucy5jb29raWVPcHRpb25zLm1heEFnZSA9IGNvbXB1dGVDb29raWVNYXhBZ2Uob3B0aW9ucy50dGwpO1xuICB9XG4gIHJldHVybiBvcHRpb25zO1xufVxudmFyIGJhZFVzYWdlTWVzc2FnZSA9IFwiaXJvbi1zZXNzaW9uOiBCYWQgdXNhZ2U6IHVzZSBnZXRJcm9uU2Vzc2lvbihyZXEsIHJlcywgb3B0aW9ucykgb3IgZ2V0SXJvblNlc3Npb24oY29va2llU3RvcmUsIG9wdGlvbnMpLlwiO1xuZnVuY3Rpb24gY3JlYXRlR2V0SXJvblNlc3Npb24oc2VhbERhdGEyLCB1bnNlYWxEYXRhMikge1xuICByZXR1cm4gZ2V0SXJvblNlc3Npb24yO1xuICBhc3luYyBmdW5jdGlvbiBnZXRJcm9uU2Vzc2lvbjIocmVxT3JDb29raWVTdG9yZSwgcmVzT3JzZXNzaW9uT3B0aW9ucywgc2Vzc2lvbk9wdGlvbnMpIHtcbiAgICBpZiAoIXJlcU9yQ29va2llU3RvcmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihiYWRVc2FnZU1lc3NhZ2UpO1xuICAgIH1cbiAgICBpZiAoIXJlc09yc2Vzc2lvbk9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihiYWRVc2FnZU1lc3NhZ2UpO1xuICAgIH1cbiAgICBpZiAoIXNlc3Npb25PcHRpb25zKSB7XG4gICAgICByZXR1cm4gZ2V0SXJvblNlc3Npb25Gcm9tQ29va2llU3RvcmUoXG4gICAgICAgIHJlcU9yQ29va2llU3RvcmUsXG4gICAgICAgIHJlc09yc2Vzc2lvbk9wdGlvbnMsXG4gICAgICAgIHNlYWxEYXRhMixcbiAgICAgICAgdW5zZWFsRGF0YTJcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHJlcSA9IHJlcU9yQ29va2llU3RvcmU7XG4gICAgY29uc3QgcmVzID0gcmVzT3JzZXNzaW9uT3B0aW9ucztcbiAgICBpZiAoIXNlc3Npb25PcHRpb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYmFkVXNhZ2VNZXNzYWdlKTtcbiAgICB9XG4gICAgaWYgKCFzZXNzaW9uT3B0aW9ucy5jb29raWVOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpcm9uLXNlc3Npb246IEJhZCB1c2FnZS4gTWlzc2luZyBjb29raWUgbmFtZS5cIik7XG4gICAgfVxuICAgIGlmICghc2Vzc2lvbk9wdGlvbnMucGFzc3dvcmQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlyb24tc2Vzc2lvbjogQmFkIHVzYWdlLiBNaXNzaW5nIHBhc3N3b3JkLlwiKTtcbiAgICB9XG4gICAgY29uc3QgcGFzc3dvcmRzTWFwID0gbm9ybWFsaXplU3RyaW5nUGFzc3dvcmRUb01hcChzZXNzaW9uT3B0aW9ucy5wYXNzd29yZCk7XG4gICAgaWYgKE9iamVjdC52YWx1ZXMocGFzc3dvcmRzTWFwKS5zb21lKChwYXNzd29yZCkgPT4gcGFzc3dvcmQubGVuZ3RoIDwgMzIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiaXJvbi1zZXNzaW9uOiBCYWQgdXNhZ2UuIFBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgMzIgY2hhcmFjdGVycyBsb25nLlwiXG4gICAgICApO1xuICAgIH1cbiAgICBsZXQgc2Vzc2lvbkNvbmZpZyA9IGdldFNlc3Npb25Db25maWcoc2Vzc2lvbk9wdGlvbnMpO1xuICAgIGNvbnN0IHNlYWxGcm9tQ29va2llcyA9IGdldENvb2tpZShyZXEsIHNlc3Npb25Db25maWcuY29va2llTmFtZSk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IHNlYWxGcm9tQ29va2llcyA/IGF3YWl0IHVuc2VhbERhdGEyKHNlYWxGcm9tQ29va2llcywge1xuICAgICAgcGFzc3dvcmQ6IHBhc3N3b3Jkc01hcCxcbiAgICAgIHR0bDogc2Vzc2lvbkNvbmZpZy50dGxcbiAgICB9KSA6IHt9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHNlc3Npb24sIHtcbiAgICAgIHVwZGF0ZUNvbmZpZzoge1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQ29uZmlnKG5ld1Nlc3Npb25PcHRpb25zKSB7XG4gICAgICAgICAgc2Vzc2lvbkNvbmZpZyA9IGdldFNlc3Npb25Db25maWcobmV3U2Vzc2lvbk9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2F2ZToge1xuICAgICAgICB2YWx1ZTogYXN5bmMgZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICAgICAgICBpZiAoXCJoZWFkZXJzU2VudFwiIGluIHJlcyAmJiByZXMuaGVhZGVyc1NlbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgXCJpcm9uLXNlc3Npb246IENhbm5vdCBzZXQgc2Vzc2lvbiBjb29raWU6IHNlc3Npb24uc2F2ZSgpIHdhcyBjYWxsZWQgYWZ0ZXIgaGVhZGVycyB3ZXJlIHNlbnQuIE1ha2Ugc3VyZSB0byBjYWxsIGl0IGJlZm9yZSBhbnkgcmVzLnNlbmQoKSBvciByZXMuZW5kKClcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc2VhbCA9IGF3YWl0IHNlYWxEYXRhMihzZXNzaW9uLCB7XG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRzTWFwLFxuICAgICAgICAgICAgdHRsOiBzZXNzaW9uQ29uZmlnLnR0bFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IGNvb2tpZVZhbHVlID0gc2VyaWFsaXplKFxuICAgICAgICAgICAgc2Vzc2lvbkNvbmZpZy5jb29raWVOYW1lLFxuICAgICAgICAgICAgc2VhbCxcbiAgICAgICAgICAgIHNlc3Npb25Db25maWcuY29va2llT3B0aW9uc1xuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGNvb2tpZVZhbHVlLmxlbmd0aCA+IDQwOTYpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYGlyb24tc2Vzc2lvbjogQ29va2llIGxlbmd0aCBpcyB0b28gYmlnICgke2Nvb2tpZVZhbHVlLmxlbmd0aH0gYnl0ZXMpLCBicm93c2VycyB3aWxsIHJlZnVzZSBpdC4gVHJ5IHRvIHJlbW92ZSBzb21lIGRhdGEuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0Q29va2llKHJlcywgY29va2llVmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGVzdHJveToge1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhzZXNzaW9uKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZXNzaW9uW2tleV07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgY29va2llVmFsdWUgPSBzZXJpYWxpemUoc2Vzc2lvbkNvbmZpZy5jb29raWVOYW1lLCBcIlwiLCB7XG4gICAgICAgICAgICAuLi5zZXNzaW9uQ29uZmlnLmNvb2tpZU9wdGlvbnMsXG4gICAgICAgICAgICBtYXhBZ2U6IDBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRDb29raWUocmVzLCBjb29raWVWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc2Vzc2lvbjtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0SXJvblNlc3Npb25Gcm9tQ29va2llU3RvcmUoY29va2llU3RvcmUsIHNlc3Npb25PcHRpb25zLCBzZWFsRGF0YTIsIHVuc2VhbERhdGEyKSB7XG4gIGlmICghc2Vzc2lvbk9wdGlvbnMuY29va2llTmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImlyb24tc2Vzc2lvbjogQmFkIHVzYWdlLiBNaXNzaW5nIGNvb2tpZSBuYW1lLlwiKTtcbiAgfVxuICBpZiAoIXNlc3Npb25PcHRpb25zLnBhc3N3b3JkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaXJvbi1zZXNzaW9uOiBCYWQgdXNhZ2UuIE1pc3NpbmcgcGFzc3dvcmQuXCIpO1xuICB9XG4gIGNvbnN0IHBhc3N3b3Jkc01hcCA9IG5vcm1hbGl6ZVN0cmluZ1Bhc3N3b3JkVG9NYXAoc2Vzc2lvbk9wdGlvbnMucGFzc3dvcmQpO1xuICBpZiAoT2JqZWN0LnZhbHVlcyhwYXNzd29yZHNNYXApLnNvbWUoKHBhc3N3b3JkKSA9PiBwYXNzd29yZC5sZW5ndGggPCAzMikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcImlyb24tc2Vzc2lvbjogQmFkIHVzYWdlLiBQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDMyIGNoYXJhY3RlcnMgbG9uZy5cIlxuICAgICk7XG4gIH1cbiAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IGdldFNlc3Npb25Db25maWcoc2Vzc2lvbk9wdGlvbnMpO1xuICBjb25zdCBzZWFsRnJvbUNvb2tpZXMgPSBnZXRTZXJ2ZXJBY3Rpb25Db29raWUoXG4gICAgc2Vzc2lvbkNvbmZpZy5jb29raWVOYW1lLFxuICAgIGNvb2tpZVN0b3JlXG4gICk7XG4gIGNvbnN0IHNlc3Npb24gPSBzZWFsRnJvbUNvb2tpZXMgPyBhd2FpdCB1bnNlYWxEYXRhMihzZWFsRnJvbUNvb2tpZXMsIHtcbiAgICBwYXNzd29yZDogcGFzc3dvcmRzTWFwLFxuICAgIHR0bDogc2Vzc2lvbkNvbmZpZy50dGxcbiAgfSkgOiB7fTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc2Vzc2lvbiwge1xuICAgIHNhdmU6IHtcbiAgICAgIHZhbHVlOiBhc3luYyBmdW5jdGlvbiBzYXZlKCkge1xuICAgICAgICBjb25zdCBzZWFsID0gYXdhaXQgc2VhbERhdGEyKHNlc3Npb24sIHtcbiAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRzTWFwLFxuICAgICAgICAgIHR0bDogc2Vzc2lvbkNvbmZpZy50dGxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvb2tpZUxlbmd0aCA9IHNlc3Npb25Db25maWcuY29va2llTmFtZS5sZW5ndGggKyBzZWFsLmxlbmd0aCArIEpTT04uc3RyaW5naWZ5KHNlc3Npb25Db25maWcuY29va2llT3B0aW9ucykubGVuZ3RoO1xuICAgICAgICBpZiAoY29va2llTGVuZ3RoID4gNDA5Nikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBpcm9uLXNlc3Npb246IENvb2tpZSBsZW5ndGggaXMgdG9vIGJpZyAoJHtjb29raWVMZW5ndGh9IGJ5dGVzKSwgYnJvd3NlcnMgd2lsbCByZWZ1c2UgaXQuIFRyeSB0byByZW1vdmUgc29tZSBkYXRhLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvb2tpZVN0b3JlLnNldChcbiAgICAgICAgICBzZXNzaW9uQ29uZmlnLmNvb2tpZU5hbWUsXG4gICAgICAgICAgc2VhbCxcbiAgICAgICAgICBzZXNzaW9uQ29uZmlnLmNvb2tpZU9wdGlvbnNcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGRlc3Ryb3k6IHtcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBPYmplY3Qua2V5cyhzZXNzaW9uKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICBkZWxldGUgc2Vzc2lvbltrZXldO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29va2llT3B0aW9ucyA9IHsgLi4uc2Vzc2lvbkNvbmZpZy5jb29raWVPcHRpb25zLCBtYXhBZ2U6IDAgfTtcbiAgICAgICAgY29va2llU3RvcmUuc2V0KHNlc3Npb25Db25maWcuY29va2llTmFtZSwgXCJcIiwgY29va2llT3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHNlc3Npb247XG59XG52YXIgc2VhbERhdGEgPSBjcmVhdGVTZWFsRGF0YShjcnlwdG8pO1xudmFyIHVuc2VhbERhdGEgPSBjcmVhdGVVbnNlYWxEYXRhKGNyeXB0byk7XG52YXIgZ2V0SXJvblNlc3Npb24gPSBjcmVhdGVHZXRJcm9uU2Vzc2lvbihzZWFsRGF0YSwgdW5zZWFsRGF0YSk7XG5cbmV4cG9ydCB7IGdldElyb25TZXNzaW9uLCBzZWFsRGF0YSwgdW5zZWFsRGF0YSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3V0LmpzLm1hcFxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/iron-session/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/iron-session/dist/index.js":
/*!*************************************************!*\
  !*** ./node_modules/iron-session/dist/index.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getIronSession: () => (/* binding */ getIronSession),\n/* harmony export */   sealData: () => (/* binding */ sealData),\n/* harmony export */   unsealData: () => (/* binding */ unsealData)\n/* harmony export */ });\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/cookie/index.js\");\n/* harmony import */ var iron_webcrypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! iron-webcrypto */ \"(rsc)/./node_modules/iron-webcrypto/dist/index.js\");\n/* harmony import */ var uncrypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uncrypto */ \"(rsc)/./node_modules/uncrypto/dist/crypto.node.mjs\");\n\n\n\n\n// src/core.ts\nvar timestampSkewSec = 60;\nvar fourteenDaysInSeconds = 14 * 24 * 3600;\nvar currentMajorVersion = 2;\nvar versionDelimiter = \"~\";\nvar defaultOptions = {\n  ttl: fourteenDaysInSeconds,\n  cookieOptions: { httpOnly: true, secure: true, sameSite: \"lax\", path: \"/\" }\n};\nfunction normalizeStringPasswordToMap(password) {\n  return typeof password === \"string\" ? { 1: password } : password;\n}\nfunction parseSeal(seal) {\n  const [sealWithoutVersion, tokenVersionAsString] = seal.split(versionDelimiter);\n  const tokenVersion = tokenVersionAsString == null ? null : parseInt(tokenVersionAsString, 10);\n  return { sealWithoutVersion, tokenVersion };\n}\nfunction computeCookieMaxAge(ttl) {\n  if (ttl === 0) {\n    return 2147483647;\n  }\n  return ttl - timestampSkewSec;\n}\nfunction getCookie(req, cookieName) {\n  return (0,cookie__WEBPACK_IMPORTED_MODULE_0__.parse)(\n    (\"headers\" in req && typeof req.headers.get === \"function\" ? req.headers.get(\"cookie\") : req.headers.cookie) ?? \"\"\n  )[cookieName] ?? \"\";\n}\nfunction getServerActionCookie(cookieName, cookieHandler) {\n  const cookieObject = cookieHandler.get(cookieName);\n  const cookie = cookieObject?.value;\n  if (typeof cookie === \"string\") {\n    return cookie;\n  }\n  return \"\";\n}\nfunction setCookie(res, cookieValue) {\n  if (\"headers\" in res && typeof res.headers.append === \"function\") {\n    res.headers.append(\"set-cookie\", cookieValue);\n    return;\n  }\n  let existingSetCookie = res.getHeader(\"set-cookie\") ?? [];\n  if (!Array.isArray(existingSetCookie)) {\n    existingSetCookie = [existingSetCookie.toString()];\n  }\n  res.setHeader(\"set-cookie\", [\n    ...existingSetCookie,\n    cookieValue\n  ]);\n}\nfunction createSealData(_crypto) {\n  return async function sealData2(data, {\n    password,\n    ttl = fourteenDaysInSeconds\n  }) {\n    const passwordsMap = normalizeStringPasswordToMap(password);\n    const mostRecentPasswordId = Math.max(\n      ...Object.keys(passwordsMap).map(Number)\n    );\n    const passwordForSeal = {\n      id: mostRecentPasswordId.toString(),\n      secret: passwordsMap[mostRecentPasswordId]\n    };\n    const seal$1 = await (0,iron_webcrypto__WEBPACK_IMPORTED_MODULE_1__.seal)(_crypto, data, passwordForSeal, {\n      ...iron_webcrypto__WEBPACK_IMPORTED_MODULE_1__.defaults,\n      ttl: ttl * 1e3\n    });\n    return `${seal$1}${versionDelimiter}${currentMajorVersion}`;\n  };\n}\nfunction createUnsealData(_crypto) {\n  return async function unsealData2(seal, {\n    password,\n    ttl = fourteenDaysInSeconds\n  }) {\n    const passwordsMap = normalizeStringPasswordToMap(password);\n    const { sealWithoutVersion, tokenVersion } = parseSeal(seal);\n    try {\n      const data = await (0,iron_webcrypto__WEBPACK_IMPORTED_MODULE_1__.unseal)(_crypto, sealWithoutVersion, passwordsMap, {\n        ...iron_webcrypto__WEBPACK_IMPORTED_MODULE_1__.defaults,\n        ttl: ttl * 1e3\n      }) ?? {};\n      if (tokenVersion === 2) {\n        return data;\n      }\n      return { ...data.persistent };\n    } catch (error) {\n      if (error instanceof Error && /^(Expired seal|Bad hmac value|Cannot find password|Incorrect number of sealed components)/.test(\n        error.message\n      )) {\n        return {};\n      }\n      throw error;\n    }\n  };\n}\nfunction getSessionConfig(sessionOptions) {\n  const options = {\n    ...defaultOptions,\n    ...sessionOptions,\n    cookieOptions: {\n      ...defaultOptions.cookieOptions,\n      ...sessionOptions.cookieOptions || {}\n    }\n  };\n  if (sessionOptions.cookieOptions && \"maxAge\" in sessionOptions.cookieOptions) {\n    if (sessionOptions.cookieOptions.maxAge === void 0) {\n      options.ttl = 0;\n    }\n  } else {\n    options.cookieOptions.maxAge = computeCookieMaxAge(options.ttl);\n  }\n  return options;\n}\nvar badUsageMessage = \"iron-session: Bad usage: use getIronSession(req, res, options) or getIronSession(cookieStore, options).\";\nfunction createGetIronSession(sealData2, unsealData2) {\n  return getIronSession2;\n  async function getIronSession2(reqOrCookieStore, resOrsessionOptions, sessionOptions) {\n    if (!reqOrCookieStore) {\n      throw new Error(badUsageMessage);\n    }\n    if (!resOrsessionOptions) {\n      throw new Error(badUsageMessage);\n    }\n    if (!sessionOptions) {\n      return getIronSessionFromCookieStore(\n        reqOrCookieStore,\n        resOrsessionOptions,\n        sealData2,\n        unsealData2\n      );\n    }\n    const req = reqOrCookieStore;\n    const res = resOrsessionOptions;\n    if (!sessionOptions) {\n      throw new Error(badUsageMessage);\n    }\n    if (!sessionOptions.cookieName) {\n      throw new Error(\"iron-session: Bad usage. Missing cookie name.\");\n    }\n    if (!sessionOptions.password) {\n      throw new Error(\"iron-session: Bad usage. Missing password.\");\n    }\n    const passwordsMap = normalizeStringPasswordToMap(sessionOptions.password);\n    if (Object.values(passwordsMap).some((password) => password.length < 32)) {\n      throw new Error(\n        \"iron-session: Bad usage. Password must be at least 32 characters long.\"\n      );\n    }\n    let sessionConfig = getSessionConfig(sessionOptions);\n    const sealFromCookies = getCookie(req, sessionConfig.cookieName);\n    const session = sealFromCookies ? await unsealData2(sealFromCookies, {\n      password: passwordsMap,\n      ttl: sessionConfig.ttl\n    }) : {};\n    Object.defineProperties(session, {\n      updateConfig: {\n        value: function updateConfig(newSessionOptions) {\n          sessionConfig = getSessionConfig(newSessionOptions);\n        }\n      },\n      save: {\n        value: async function save() {\n          if (\"headersSent\" in res && res.headersSent) {\n            throw new Error(\n              \"iron-session: Cannot set session cookie: session.save() was called after headers were sent. Make sure to call it before any res.send() or res.end()\"\n            );\n          }\n          const seal = await sealData2(session, {\n            password: passwordsMap,\n            ttl: sessionConfig.ttl\n          });\n          const cookieValue = (0,cookie__WEBPACK_IMPORTED_MODULE_0__.serialize)(\n            sessionConfig.cookieName,\n            seal,\n            sessionConfig.cookieOptions\n          );\n          if (cookieValue.length > 4096) {\n            throw new Error(\n              `iron-session: Cookie length is too big (${cookieValue.length} bytes), browsers will refuse it. Try to remove some data.`\n            );\n          }\n          setCookie(res, cookieValue);\n        }\n      },\n      destroy: {\n        value: function destroy() {\n          Object.keys(session).forEach((key) => {\n            delete session[key];\n          });\n          const cookieValue = (0,cookie__WEBPACK_IMPORTED_MODULE_0__.serialize)(sessionConfig.cookieName, \"\", {\n            ...sessionConfig.cookieOptions,\n            maxAge: 0\n          });\n          setCookie(res, cookieValue);\n        }\n      }\n    });\n    return session;\n  }\n}\nasync function getIronSessionFromCookieStore(cookieStore, sessionOptions, sealData2, unsealData2) {\n  if (!sessionOptions.cookieName) {\n    throw new Error(\"iron-session: Bad usage. Missing cookie name.\");\n  }\n  if (!sessionOptions.password) {\n    throw new Error(\"iron-session: Bad usage. Missing password.\");\n  }\n  const passwordsMap = normalizeStringPasswordToMap(sessionOptions.password);\n  if (Object.values(passwordsMap).some((password) => password.length < 32)) {\n    throw new Error(\n      \"iron-session: Bad usage. Password must be at least 32 characters long.\"\n    );\n  }\n  const sessionConfig = getSessionConfig(sessionOptions);\n  const sealFromCookies = getServerActionCookie(\n    sessionConfig.cookieName,\n    cookieStore\n  );\n  const session = sealFromCookies ? await unsealData2(sealFromCookies, {\n    password: passwordsMap,\n    ttl: sessionConfig.ttl\n  }) : {};\n  Object.defineProperties(session, {\n    save: {\n      value: async function save() {\n        const seal = await sealData2(session, {\n          password: passwordsMap,\n          ttl: sessionConfig.ttl\n        });\n        const cookieLength = sessionConfig.cookieName.length + seal.length + JSON.stringify(sessionConfig.cookieOptions).length;\n        if (cookieLength > 4096) {\n          throw new Error(\n            `iron-session: Cookie length is too big (${cookieLength} bytes), browsers will refuse it. Try to remove some data.`\n          );\n        }\n        cookieStore.set(\n          sessionConfig.cookieName,\n          seal,\n          sessionConfig.cookieOptions\n        );\n      }\n    },\n    destroy: {\n      value: function destroy() {\n        Object.keys(session).forEach((key) => {\n          delete session[key];\n        });\n        const cookieOptions = { ...sessionConfig.cookieOptions, maxAge: 0 };\n        cookieStore.set(sessionConfig.cookieName, \"\", cookieOptions);\n      }\n    }\n  });\n  return session;\n}\nvar sealData = createSealData(uncrypto__WEBPACK_IMPORTED_MODULE_2__);\nvar unsealData = createUnsealData(uncrypto__WEBPACK_IMPORTED_MODULE_2__);\nvar getIronSession = createGetIronSession(sealData, unsealData);\n\n\n//# sourceMappingURL=out.js.map\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaXJvbi1zZXNzaW9uL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBDO0FBQ2M7QUFDckI7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw2Q0FBSztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvREFBSTtBQUM3QixTQUFTLG9EQUFRO0FBQ2pCO0FBQ0EsS0FBSztBQUNMLGNBQWMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLG9CQUFvQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxZQUFZLG1DQUFtQztBQUMvQztBQUNBLHlCQUF5QixzREFBTTtBQUMvQixXQUFXLG9EQUFRO0FBQ25CO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLDhCQUE4QixpREFBUztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsb0JBQW9CO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLDhCQUE4QixpREFBUztBQUN2QztBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxjQUFjO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsOEJBQThCLHFDQUFNO0FBQ3BDLGtDQUFrQyxxQ0FBTTtBQUN4Qzs7QUFFZ0Q7QUFDaEQ7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250Ly4vbm9kZV9tb2R1bGVzL2lyb24tc2Vzc2lvbi9kaXN0L2luZGV4LmpzP2FhMTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2VyaWFsaXplLCBwYXJzZSB9IGZyb20gJ2Nvb2tpZSc7XG5pbXBvcnQgeyBzZWFsLCBkZWZhdWx0cywgdW5zZWFsIH0gZnJvbSAnaXJvbi13ZWJjcnlwdG8nO1xuaW1wb3J0ICogYXMgY3J5cHRvIGZyb20gJ3VuY3J5cHRvJztcblxuLy8gc3JjL2NvcmUudHNcbnZhciB0aW1lc3RhbXBTa2V3U2VjID0gNjA7XG52YXIgZm91cnRlZW5EYXlzSW5TZWNvbmRzID0gMTQgKiAyNCAqIDM2MDA7XG52YXIgY3VycmVudE1ham9yVmVyc2lvbiA9IDI7XG52YXIgdmVyc2lvbkRlbGltaXRlciA9IFwiflwiO1xudmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICB0dGw6IGZvdXJ0ZWVuRGF5c0luU2Vjb25kcyxcbiAgY29va2llT3B0aW9uczogeyBodHRwT25seTogdHJ1ZSwgc2VjdXJlOiB0cnVlLCBzYW1lU2l0ZTogXCJsYXhcIiwgcGF0aDogXCIvXCIgfVxufTtcbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0cmluZ1Bhc3N3b3JkVG9NYXAocGFzc3dvcmQpIHtcbiAgcmV0dXJuIHR5cGVvZiBwYXNzd29yZCA9PT0gXCJzdHJpbmdcIiA/IHsgMTogcGFzc3dvcmQgfSA6IHBhc3N3b3JkO1xufVxuZnVuY3Rpb24gcGFyc2VTZWFsKHNlYWwpIHtcbiAgY29uc3QgW3NlYWxXaXRob3V0VmVyc2lvbiwgdG9rZW5WZXJzaW9uQXNTdHJpbmddID0gc2VhbC5zcGxpdCh2ZXJzaW9uRGVsaW1pdGVyKTtcbiAgY29uc3QgdG9rZW5WZXJzaW9uID0gdG9rZW5WZXJzaW9uQXNTdHJpbmcgPT0gbnVsbCA/IG51bGwgOiBwYXJzZUludCh0b2tlblZlcnNpb25Bc1N0cmluZywgMTApO1xuICByZXR1cm4geyBzZWFsV2l0aG91dFZlcnNpb24sIHRva2VuVmVyc2lvbiB9O1xufVxuZnVuY3Rpb24gY29tcHV0ZUNvb2tpZU1heEFnZSh0dGwpIHtcbiAgaWYgKHR0bCA9PT0gMCkge1xuICAgIHJldHVybiAyMTQ3NDgzNjQ3O1xuICB9XG4gIHJldHVybiB0dGwgLSB0aW1lc3RhbXBTa2V3U2VjO1xufVxuZnVuY3Rpb24gZ2V0Q29va2llKHJlcSwgY29va2llTmFtZSkge1xuICByZXR1cm4gcGFyc2UoXG4gICAgKFwiaGVhZGVyc1wiIGluIHJlcSAmJiB0eXBlb2YgcmVxLmhlYWRlcnMuZ2V0ID09PSBcImZ1bmN0aW9uXCIgPyByZXEuaGVhZGVycy5nZXQoXCJjb29raWVcIikgOiByZXEuaGVhZGVycy5jb29raWUpID8/IFwiXCJcbiAgKVtjb29raWVOYW1lXSA/PyBcIlwiO1xufVxuZnVuY3Rpb24gZ2V0U2VydmVyQWN0aW9uQ29va2llKGNvb2tpZU5hbWUsIGNvb2tpZUhhbmRsZXIpIHtcbiAgY29uc3QgY29va2llT2JqZWN0ID0gY29va2llSGFuZGxlci5nZXQoY29va2llTmFtZSk7XG4gIGNvbnN0IGNvb2tpZSA9IGNvb2tpZU9iamVjdD8udmFsdWU7XG4gIGlmICh0eXBlb2YgY29va2llID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGNvb2tpZTtcbiAgfVxuICByZXR1cm4gXCJcIjtcbn1cbmZ1bmN0aW9uIHNldENvb2tpZShyZXMsIGNvb2tpZVZhbHVlKSB7XG4gIGlmIChcImhlYWRlcnNcIiBpbiByZXMgJiYgdHlwZW9mIHJlcy5oZWFkZXJzLmFwcGVuZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmVzLmhlYWRlcnMuYXBwZW5kKFwic2V0LWNvb2tpZVwiLCBjb29raWVWYWx1ZSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBleGlzdGluZ1NldENvb2tpZSA9IHJlcy5nZXRIZWFkZXIoXCJzZXQtY29va2llXCIpID8/IFtdO1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZXhpc3RpbmdTZXRDb29raWUpKSB7XG4gICAgZXhpc3RpbmdTZXRDb29raWUgPSBbZXhpc3RpbmdTZXRDb29raWUudG9TdHJpbmcoKV07XG4gIH1cbiAgcmVzLnNldEhlYWRlcihcInNldC1jb29raWVcIiwgW1xuICAgIC4uLmV4aXN0aW5nU2V0Q29va2llLFxuICAgIGNvb2tpZVZhbHVlXG4gIF0pO1xufVxuZnVuY3Rpb24gY3JlYXRlU2VhbERhdGEoX2NyeXB0bykge1xuICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gc2VhbERhdGEyKGRhdGEsIHtcbiAgICBwYXNzd29yZCxcbiAgICB0dGwgPSBmb3VydGVlbkRheXNJblNlY29uZHNcbiAgfSkge1xuICAgIGNvbnN0IHBhc3N3b3Jkc01hcCA9IG5vcm1hbGl6ZVN0cmluZ1Bhc3N3b3JkVG9NYXAocGFzc3dvcmQpO1xuICAgIGNvbnN0IG1vc3RSZWNlbnRQYXNzd29yZElkID0gTWF0aC5tYXgoXG4gICAgICAuLi5PYmplY3Qua2V5cyhwYXNzd29yZHNNYXApLm1hcChOdW1iZXIpXG4gICAgKTtcbiAgICBjb25zdCBwYXNzd29yZEZvclNlYWwgPSB7XG4gICAgICBpZDogbW9zdFJlY2VudFBhc3N3b3JkSWQudG9TdHJpbmcoKSxcbiAgICAgIHNlY3JldDogcGFzc3dvcmRzTWFwW21vc3RSZWNlbnRQYXNzd29yZElkXVxuICAgIH07XG4gICAgY29uc3Qgc2VhbCQxID0gYXdhaXQgc2VhbChfY3J5cHRvLCBkYXRhLCBwYXNzd29yZEZvclNlYWwsIHtcbiAgICAgIC4uLmRlZmF1bHRzLFxuICAgICAgdHRsOiB0dGwgKiAxZTNcbiAgICB9KTtcbiAgICByZXR1cm4gYCR7c2VhbCQxfSR7dmVyc2lvbkRlbGltaXRlcn0ke2N1cnJlbnRNYWpvclZlcnNpb259YDtcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVVuc2VhbERhdGEoX2NyeXB0bykge1xuICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gdW5zZWFsRGF0YTIoc2VhbCwge1xuICAgIHBhc3N3b3JkLFxuICAgIHR0bCA9IGZvdXJ0ZWVuRGF5c0luU2Vjb25kc1xuICB9KSB7XG4gICAgY29uc3QgcGFzc3dvcmRzTWFwID0gbm9ybWFsaXplU3RyaW5nUGFzc3dvcmRUb01hcChwYXNzd29yZCk7XG4gICAgY29uc3QgeyBzZWFsV2l0aG91dFZlcnNpb24sIHRva2VuVmVyc2lvbiB9ID0gcGFyc2VTZWFsKHNlYWwpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdW5zZWFsKF9jcnlwdG8sIHNlYWxXaXRob3V0VmVyc2lvbiwgcGFzc3dvcmRzTWFwLCB7XG4gICAgICAgIC4uLmRlZmF1bHRzLFxuICAgICAgICB0dGw6IHR0bCAqIDFlM1xuICAgICAgfSkgPz8ge307XG4gICAgICBpZiAodG9rZW5WZXJzaW9uID09PSAyKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgLi4uZGF0YS5wZXJzaXN0ZW50IH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIC9eKEV4cGlyZWQgc2VhbHxCYWQgaG1hYyB2YWx1ZXxDYW5ub3QgZmluZCBwYXNzd29yZHxJbmNvcnJlY3QgbnVtYmVyIG9mIHNlYWxlZCBjb21wb25lbnRzKS8udGVzdChcbiAgICAgICAgZXJyb3IubWVzc2FnZVxuICAgICAgKSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBnZXRTZXNzaW9uQ29uZmlnKHNlc3Npb25PcHRpb25zKSB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgLi4uc2Vzc2lvbk9wdGlvbnMsXG4gICAgY29va2llT3B0aW9uczoge1xuICAgICAgLi4uZGVmYXVsdE9wdGlvbnMuY29va2llT3B0aW9ucyxcbiAgICAgIC4uLnNlc3Npb25PcHRpb25zLmNvb2tpZU9wdGlvbnMgfHwge31cbiAgICB9XG4gIH07XG4gIGlmIChzZXNzaW9uT3B0aW9ucy5jb29raWVPcHRpb25zICYmIFwibWF4QWdlXCIgaW4gc2Vzc2lvbk9wdGlvbnMuY29va2llT3B0aW9ucykge1xuICAgIGlmIChzZXNzaW9uT3B0aW9ucy5jb29raWVPcHRpb25zLm1heEFnZSA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zLnR0bCA9IDA7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG9wdGlvbnMuY29va2llT3B0aW9ucy5tYXhBZ2UgPSBjb21wdXRlQ29va2llTWF4QWdlKG9wdGlvbnMudHRsKTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn1cbnZhciBiYWRVc2FnZU1lc3NhZ2UgPSBcImlyb24tc2Vzc2lvbjogQmFkIHVzYWdlOiB1c2UgZ2V0SXJvblNlc3Npb24ocmVxLCByZXMsIG9wdGlvbnMpIG9yIGdldElyb25TZXNzaW9uKGNvb2tpZVN0b3JlLCBvcHRpb25zKS5cIjtcbmZ1bmN0aW9uIGNyZWF0ZUdldElyb25TZXNzaW9uKHNlYWxEYXRhMiwgdW5zZWFsRGF0YTIpIHtcbiAgcmV0dXJuIGdldElyb25TZXNzaW9uMjtcbiAgYXN5bmMgZnVuY3Rpb24gZ2V0SXJvblNlc3Npb24yKHJlcU9yQ29va2llU3RvcmUsIHJlc09yc2Vzc2lvbk9wdGlvbnMsIHNlc3Npb25PcHRpb25zKSB7XG4gICAgaWYgKCFyZXFPckNvb2tpZVN0b3JlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYmFkVXNhZ2VNZXNzYWdlKTtcbiAgICB9XG4gICAgaWYgKCFyZXNPcnNlc3Npb25PcHRpb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYmFkVXNhZ2VNZXNzYWdlKTtcbiAgICB9XG4gICAgaWYgKCFzZXNzaW9uT3B0aW9ucykge1xuICAgICAgcmV0dXJuIGdldElyb25TZXNzaW9uRnJvbUNvb2tpZVN0b3JlKFxuICAgICAgICByZXFPckNvb2tpZVN0b3JlLFxuICAgICAgICByZXNPcnNlc3Npb25PcHRpb25zLFxuICAgICAgICBzZWFsRGF0YTIsXG4gICAgICAgIHVuc2VhbERhdGEyXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCByZXEgPSByZXFPckNvb2tpZVN0b3JlO1xuICAgIGNvbnN0IHJlcyA9IHJlc09yc2Vzc2lvbk9wdGlvbnM7XG4gICAgaWYgKCFzZXNzaW9uT3B0aW9ucykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGJhZFVzYWdlTWVzc2FnZSk7XG4gICAgfVxuICAgIGlmICghc2Vzc2lvbk9wdGlvbnMuY29va2llTmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaXJvbi1zZXNzaW9uOiBCYWQgdXNhZ2UuIE1pc3NpbmcgY29va2llIG5hbWUuXCIpO1xuICAgIH1cbiAgICBpZiAoIXNlc3Npb25PcHRpb25zLnBhc3N3b3JkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpcm9uLXNlc3Npb246IEJhZCB1c2FnZS4gTWlzc2luZyBwYXNzd29yZC5cIik7XG4gICAgfVxuICAgIGNvbnN0IHBhc3N3b3Jkc01hcCA9IG5vcm1hbGl6ZVN0cmluZ1Bhc3N3b3JkVG9NYXAoc2Vzc2lvbk9wdGlvbnMucGFzc3dvcmQpO1xuICAgIGlmIChPYmplY3QudmFsdWVzKHBhc3N3b3Jkc01hcCkuc29tZSgocGFzc3dvcmQpID0+IHBhc3N3b3JkLmxlbmd0aCA8IDMyKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcImlyb24tc2Vzc2lvbjogQmFkIHVzYWdlLiBQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDMyIGNoYXJhY3RlcnMgbG9uZy5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgbGV0IHNlc3Npb25Db25maWcgPSBnZXRTZXNzaW9uQ29uZmlnKHNlc3Npb25PcHRpb25zKTtcbiAgICBjb25zdCBzZWFsRnJvbUNvb2tpZXMgPSBnZXRDb29raWUocmVxLCBzZXNzaW9uQ29uZmlnLmNvb2tpZU5hbWUpO1xuICAgIGNvbnN0IHNlc3Npb24gPSBzZWFsRnJvbUNvb2tpZXMgPyBhd2FpdCB1bnNlYWxEYXRhMihzZWFsRnJvbUNvb2tpZXMsIHtcbiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZHNNYXAsXG4gICAgICB0dGw6IHNlc3Npb25Db25maWcudHRsXG4gICAgfSkgOiB7fTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzZXNzaW9uLCB7XG4gICAgICB1cGRhdGVDb25maWc6IHtcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUNvbmZpZyhuZXdTZXNzaW9uT3B0aW9ucykge1xuICAgICAgICAgIHNlc3Npb25Db25maWcgPSBnZXRTZXNzaW9uQ29uZmlnKG5ld1Nlc3Npb25PcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNhdmU6IHtcbiAgICAgICAgdmFsdWU6IGFzeW5jIGZ1bmN0aW9uIHNhdmUoKSB7XG4gICAgICAgICAgaWYgKFwiaGVhZGVyc1NlbnRcIiBpbiByZXMgJiYgcmVzLmhlYWRlcnNTZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIFwiaXJvbi1zZXNzaW9uOiBDYW5ub3Qgc2V0IHNlc3Npb24gY29va2llOiBzZXNzaW9uLnNhdmUoKSB3YXMgY2FsbGVkIGFmdGVyIGhlYWRlcnMgd2VyZSBzZW50LiBNYWtlIHN1cmUgdG8gY2FsbCBpdCBiZWZvcmUgYW55IHJlcy5zZW5kKCkgb3IgcmVzLmVuZCgpXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHNlYWwgPSBhd2FpdCBzZWFsRGF0YTIoc2Vzc2lvbiwge1xuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3Jkc01hcCxcbiAgICAgICAgICAgIHR0bDogc2Vzc2lvbkNvbmZpZy50dGxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBjb29raWVWYWx1ZSA9IHNlcmlhbGl6ZShcbiAgICAgICAgICAgIHNlc3Npb25Db25maWcuY29va2llTmFtZSxcbiAgICAgICAgICAgIHNlYWwsXG4gICAgICAgICAgICBzZXNzaW9uQ29uZmlnLmNvb2tpZU9wdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChjb29raWVWYWx1ZS5sZW5ndGggPiA0MDk2KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBpcm9uLXNlc3Npb246IENvb2tpZSBsZW5ndGggaXMgdG9vIGJpZyAoJHtjb29raWVWYWx1ZS5sZW5ndGh9IGJ5dGVzKSwgYnJvd3NlcnMgd2lsbCByZWZ1c2UgaXQuIFRyeSB0byByZW1vdmUgc29tZSBkYXRhLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldENvb2tpZShyZXMsIGNvb2tpZVZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRlc3Ryb3k6IHtcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMoc2Vzc2lvbikuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgc2Vzc2lvbltrZXldO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IGNvb2tpZVZhbHVlID0gc2VyaWFsaXplKHNlc3Npb25Db25maWcuY29va2llTmFtZSwgXCJcIiwge1xuICAgICAgICAgICAgLi4uc2Vzc2lvbkNvbmZpZy5jb29raWVPcHRpb25zLFxuICAgICAgICAgICAgbWF4QWdlOiAwXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0Q29va2llKHJlcywgY29va2llVmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHNlc3Npb247XG4gIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGdldElyb25TZXNzaW9uRnJvbUNvb2tpZVN0b3JlKGNvb2tpZVN0b3JlLCBzZXNzaW9uT3B0aW9ucywgc2VhbERhdGEyLCB1bnNlYWxEYXRhMikge1xuICBpZiAoIXNlc3Npb25PcHRpb25zLmNvb2tpZU5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpcm9uLXNlc3Npb246IEJhZCB1c2FnZS4gTWlzc2luZyBjb29raWUgbmFtZS5cIik7XG4gIH1cbiAgaWYgKCFzZXNzaW9uT3B0aW9ucy5wYXNzd29yZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImlyb24tc2Vzc2lvbjogQmFkIHVzYWdlLiBNaXNzaW5nIHBhc3N3b3JkLlwiKTtcbiAgfVxuICBjb25zdCBwYXNzd29yZHNNYXAgPSBub3JtYWxpemVTdHJpbmdQYXNzd29yZFRvTWFwKHNlc3Npb25PcHRpb25zLnBhc3N3b3JkKTtcbiAgaWYgKE9iamVjdC52YWx1ZXMocGFzc3dvcmRzTWFwKS5zb21lKChwYXNzd29yZCkgPT4gcGFzc3dvcmQubGVuZ3RoIDwgMzIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJpcm9uLXNlc3Npb246IEJhZCB1c2FnZS4gUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCAzMiBjaGFyYWN0ZXJzIGxvbmcuXCJcbiAgICApO1xuICB9XG4gIGNvbnN0IHNlc3Npb25Db25maWcgPSBnZXRTZXNzaW9uQ29uZmlnKHNlc3Npb25PcHRpb25zKTtcbiAgY29uc3Qgc2VhbEZyb21Db29raWVzID0gZ2V0U2VydmVyQWN0aW9uQ29va2llKFxuICAgIHNlc3Npb25Db25maWcuY29va2llTmFtZSxcbiAgICBjb29raWVTdG9yZVxuICApO1xuICBjb25zdCBzZXNzaW9uID0gc2VhbEZyb21Db29raWVzID8gYXdhaXQgdW5zZWFsRGF0YTIoc2VhbEZyb21Db29raWVzLCB7XG4gICAgcGFzc3dvcmQ6IHBhc3N3b3Jkc01hcCxcbiAgICB0dGw6IHNlc3Npb25Db25maWcudHRsXG4gIH0pIDoge307XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHNlc3Npb24sIHtcbiAgICBzYXZlOiB7XG4gICAgICB2YWx1ZTogYXN5bmMgZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICAgICAgY29uc3Qgc2VhbCA9IGF3YWl0IHNlYWxEYXRhMihzZXNzaW9uLCB7XG4gICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3Jkc01hcCxcbiAgICAgICAgICB0dGw6IHNlc3Npb25Db25maWcudHRsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjb29raWVMZW5ndGggPSBzZXNzaW9uQ29uZmlnLmNvb2tpZU5hbWUubGVuZ3RoICsgc2VhbC5sZW5ndGggKyBKU09OLnN0cmluZ2lmeShzZXNzaW9uQ29uZmlnLmNvb2tpZU9wdGlvbnMpLmxlbmd0aDtcbiAgICAgICAgaWYgKGNvb2tpZUxlbmd0aCA+IDQwOTYpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgaXJvbi1zZXNzaW9uOiBDb29raWUgbGVuZ3RoIGlzIHRvbyBiaWcgKCR7Y29va2llTGVuZ3RofSBieXRlcyksIGJyb3dzZXJzIHdpbGwgcmVmdXNlIGl0LiBUcnkgdG8gcmVtb3ZlIHNvbWUgZGF0YS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb29raWVTdG9yZS5zZXQoXG4gICAgICAgICAgc2Vzc2lvbkNvbmZpZy5jb29raWVOYW1lLFxuICAgICAgICAgIHNlYWwsXG4gICAgICAgICAgc2Vzc2lvbkNvbmZpZy5jb29raWVPcHRpb25zXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSxcbiAgICBkZXN0cm95OiB7XG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoc2Vzc2lvbikuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgZGVsZXRlIHNlc3Npb25ba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvb2tpZU9wdGlvbnMgPSB7IC4uLnNlc3Npb25Db25maWcuY29va2llT3B0aW9ucywgbWF4QWdlOiAwIH07XG4gICAgICAgIGNvb2tpZVN0b3JlLnNldChzZXNzaW9uQ29uZmlnLmNvb2tpZU5hbWUsIFwiXCIsIGNvb2tpZU9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBzZXNzaW9uO1xufVxudmFyIHNlYWxEYXRhID0gY3JlYXRlU2VhbERhdGEoY3J5cHRvKTtcbnZhciB1bnNlYWxEYXRhID0gY3JlYXRlVW5zZWFsRGF0YShjcnlwdG8pO1xudmFyIGdldElyb25TZXNzaW9uID0gY3JlYXRlR2V0SXJvblNlc3Npb24oc2VhbERhdGEsIHVuc2VhbERhdGEpO1xuXG5leHBvcnQgeyBnZXRJcm9uU2Vzc2lvbiwgc2VhbERhdGEsIHVuc2VhbERhdGEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW91dC5qcy5tYXBcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/iron-session/dist/index.js\n");

/***/ })

};
;